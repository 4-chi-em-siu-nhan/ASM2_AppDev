@using ASM2_AppDev.Utility;
@model List<Category>
<partial name="_Notification" />
<div class="row pt-4 pb-4">
	<div class="col-6">
		<h2>List of Categories</h2>
	</div>
	<div class="col-6">
		@if (User.IsInRole(SD.Role_StoreOwner))
		{
			<a asp-controller="Category" asp-action="Create" class="btn btn-primary">Create a Category</a>
		}
	</div>
</div>

<div>
	<table class="table table-bordered">
		<thead>
			<tr>
				<td>Category Name</td>
				<td>Description</td>
				<td>Status</td>
			</tr>
		</thead>
		<tbody>
			@foreach (var category in Model)
			{
				<tr>
					<td>@category.Name</td>
					<td>@category.Description</td>
					<td>@category.Status</td>
					<td>
						@if (User.IsInRole(SD.Role_StoreOwner))
						{
							@if (category.Status == "Approval")
							{
								<div>
									<a asp-controller="Category" asp-action="Edit" asp-route-id="@category.Id" class="btn btn-outline-info">Edit</a>
									<a asp-controller="Category" asp-action="Delete" asp-route-id="@category.Id" class="btn btn-outline-danger">Delete</a>
								</div>
							}
						}
						@if (User.IsInRole(SD.Role_Admin))
						{
							@if (category.Status == "Pending")
							{
								<a asp-controller="Category" asp-action="Approval" asp-route-id="@category.Id" class="btn btn-info">Approval</a>
							}
						}
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
